@model CartifyBLL.ViewModels.Product.ProductDTO
@{
    var imageUrl = Model.ImageUrl?.Split('|')[0];
}

<div class="product">
    <div class="product-img">
        <a asp-controller="Store" asp-action="Details" asp-route-id="@Model.ProductId" style="display:block;">
            <img src="@imageUrl" alt="@Model.Name" style="width:100%; height:auto;" />
        </a>
        @if (Model.IsNew)
        {
            <div class="product-label">
                <span class="new">NEW</span>
            </div>
        }
    </div>
    <div class="product-body">
        <p class="product-category">@Model.Category</p>
        <h3 class="product-name">
            <a asp-controller="Store" asp-action="Details" asp-route-id="@Model.ProductId">@Model.Name</a>
        </h3>
        <h4 class="product-price">
            @Model.Price <del class="product-old-price">@(Model.Price + 20)</del>
        </h4>

        <div class="product-btns">
            <button class="add-to-wishlist @(Model.InWishlist ? "active" : "")"
                    onclick="toggleWishlist(@Model.ProductId, this)">
                <i class="fa @(Model.InWishlist ? "fa-heart" : "fa-heart-o")"></i>
            </button>
        </div>
    </div>
    <div class="add-to-cart">
        @if (Model.StockQuantity > 0)
        {
            <button class="add-to-cart-btn" onclick="addToCart(@Model.ProductId)">
                <i class="fa fa-shopping-cart"></i> add to cart
            </button>
        }
        else
        {
            <button class="add-to-cart-btn" disabled>
                <i class="fa fa-ban"></i> out of stock
            </button>
        }
    </div>
</div>

